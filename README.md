# ShapeChangeable2D

## はじめに

形状自在計算機システムの2Dシミュレータです。現在開発中です。

## 操作方法

#### HierarchyのGameManagerについているGameManager.csが主な処理を担っています。
* Numpixels：生成されるピクセルの数。多くしすぎると枠外に出ると思います。
* MaxCordinaters：同時に存在できるCordinaterの最大数。基本１つを想定しているので、二つ以上だと変になるかもしれません。
* isAuto：チェックをつけるとJSONファイルへの書き込みが自動で行われます。

#### エディタの再生ボタンを押すとシミュレーションが開始されます。
* UI
  * 記録モード切替：押すとisAutoが切り替わります。
  * 記録：非オート時のみ押すことができ、押したタイミングでの接続情報をJSONに書き出します
  * 終了：シミュレーションを停止します。画面上のエディタ再生停止ボタンでも終了できますが、非オート時に最終的な隣接行列をゼロ行列にするためにはUI上のこのボタンを押してください。
 
* ピクセル操作

  ドラッグアンドドロップで動きます。クリックでコーディネーター（赤）を切り替えることも可能ですが。現時点ではJSON出力の関係上切り替えない方がいいです。

* 接続判定

  ピクセル同士が、一辺の長さの1/10以下の距離まで近づいた場合接触した判定となり、未接続ルーター（黒）がコーディネーターや接続済みルーター（緑）と接触した場合は接続されたとして緑色に変化します。

  横ずれに関しては、現時点では辺の長さの1/2より大きな割合で接触していないと接触判定が得られません。

  また、**ピクセルは物理演算されていない**ため重なってしまう場合がありますのでご注意ください。

## JSON出力についての注意点

* 保存場所はシミュレーション開始後にコンソールに表示されます。若干わかりづらい場所なので変更したければJsonControllerGenrics.cs内のファイルパスを書き換えてください。
* オート記録モード時には基本的に接続状況が変化した場合にイベントが追加されますが、ピクセルの仕様上ピクセル同士が離れた時に二重でイベントが更新されてしまいます。接続情報が間違っているわけではないですが冗長になるので、もし問題あれば直します。オートモードは終了時にも無駄な行列が生成されるので、手間ですがオートモードを切って手動で記録したほうが綺麗なJSONになるかもしれません。
